#:kivy 1.10.1

<PlayerShip>:
    size_hint: None, None
    size: 10, 20
    canvas:
        Clear
        Color: 
            rgb: (0, 1, 0)
        Rectangle:
            pos: self.pos
            size: self.size

<EnemyShip>:
    size_hint: None, None
    size: 40, 30
    canvas:
        Clear
        Color: 
            rgb: (1, 0, 0)
        Ellipse:
            pos:self.pos
            size:self.size
        
<Debris>:
    size_hint: None, None
    size: 10, 10
    canvas:
        Clear
        # Color: 
        #     rgb: (0.7, 0.7, 0)
        Rectangle:
            pos:self.pos
            size:self.size

<PlayerBullet>:
    id: pbullet
    size_hint: None, None
    size: 2, 15
    canvas.before:
        PushMatrix
        Rotate:
            angle: root.angle
            axis: 0, 0, 1
            origin: root.center
    canvas:
        Clear
        Color: 
            rgb: (0, 1, 0)
        Rectangle:
            pos:self.pos
            size:self.size
    canvas.after:
        PopMatrix

<EnemyBullet>:
    id: ebullet
    size_hint: None, None
    size: 2, 8
    canvas:
        Clear
        Color: 
            rgb: (1, 0, 0)
        Rectangle:
            pos:self.pos
            size:self.size

<ShooterGame>:
    Menu:
        id: menu
        size: root.size
    SpaceGame:
        menu: menu
        size: root.size

<SpaceGame>:
    name: "main"

    container: container

    canvas:
        Clear
        Color: 
            rgb: (0, 0, 0)
        Rectangle:
            pos: self.pos
            size: root.size

    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        size_hint: None, None
        size: root.size

        Button:
            size_hint: None, None
            size: 50, 25
            text: "Menu"
            on_release: root.manager.current = "menu"

    ActorsContainer:
        id: container

    AnchorLayout:
        anchor_y: "bottom"
        size_hint_y: None
        # height: 20

        BoxLayout:
            orientation: "horizontal"
            Label:
                text: "Score: {}".format(str(container.score))
                text_size: self.size
                halign: "left"
                padding: (5, 2)

            Label:
                text: "Lives: {}".format(str(container.player_lives))
                text_size: self.size
                halign: "right"
                padding: (10, 2)

<Menu>:
    name: "menu"
    lbl_footer: lbl_footer
    but_launch: button1
    # but2: button2
    but3: button3

    canvas:
        Clear
        Color: 
            rgba: (1, 1, 1, 0.1)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"

        Button:
            id: button1
            font_size: 50
            background_color: (1, 1, 1, 0)
            center_x: root.width / 2
            top: root.top - 50
            text: "Survival Mode"
            on_release: root.manager.current = "main"

        # Button:
        #     id: button2
        #     font_size: 50
        #     background_color: (1, 1, 1, 0)
        #     center_x: root.width / 2
        #     top: root.top - 150
        #     text: "Options"
        #     on_release: print("TODO no options")
            
        Button:
            id: button3
            font_size: 50
            background_color: (1, 1, 1, 0)
            center_x: root.width / 2
            top: root.top - 250
            text: "Quit"
            on_release: app.stop()

        Label:
            id: lbl_footer
            font_size: 20
            background_color: (1, 1, 1, 0)
            center_x: root.width / 2
            top: 1 + self.height
            text: ""
